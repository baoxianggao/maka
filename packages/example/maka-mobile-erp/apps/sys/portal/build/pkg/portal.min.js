!function e(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("maka")):"function"==typeof define&&define.amd?define(["maka"],n):"object"==typeof exports?exports["maka-app-portal"]=n(require("maka")):t["maka-app-portal"]=n(t.maka)}("undefined"!=typeof window&&window||"undefined"!=typeof global&&global,function(n){return r={},o.m=a=[function(e,t){e.exports=n},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n},function(e){e.exports={isMakaApp:!0,name:"portal",description:"portal",version:"1.0.0",license:"MIT",author:"",repository:{type:"git",url:"https://github.com/makajs/portal.git"},bugs:{url:"https://github.com/makajs/portal/issues"},homepage:"https://github.com/makajs/portal#readme",scripts:{start:"maka start",dev:"maka start --dev",build:"maka build",pkg:"maka pkg"},dependencies:{},server:{proxy:null,port:8e3},subAppDir:["./apps","../../base","../../home"],devDependencies:{}}},function(e,t,n){var o=n(1);function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(e){o(t,e,n[e])})}return t}e.exports=a},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n},function(e,t,n){e.exports=n(7)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(2),o={component:"div",className:"portal",children:[{component:"div",className:"{{(data.content && data.content.appName) ? 'portal-hidden': 'portal-show portal-header'}}",children:"ERP DEMO"},{component:"div",className:"{{(data.content && data.content.appName) ? 'portal-hidden': 'portal-content portal-show'}}",children:{component:"antd.TabBar",unselectedTintColor:"#949494",tintColor:"#33A3F4",barTintColor:"#F8FCFF",prerenderingSiblingsNumber:0,children:[{title:"首页",key:"home",component:"antd.TabBar.Item",selected:"{{data.selectedTab == 'home'}}",onPress:"{{()=>$base.ss({'data.selectedTab': 'home'})}}",icon:{component:"FA",name:"home"},selectedIcon:{component:"FA",name:"home"},children:[{component:"AppLoader",appName:"home"}]},{title:"报表",key:"rpt",component:"TabBar.Item",selected:"{{data.selectedTab == 'rpt'}}",onPress:"{{()=>$base.ss({'data.selectedTab': 'rpt'})}}",icon:{component:"FA",name:"bar-chart"},selectedIcon:{component:"FA",name:"bar-chart"},children:[{component:"AppLoader",appName:"rpt"}]},{title:"我的",key:"my",component:"TabBar.Item",selected:"{{data.selectedTab == 'my'}}",onPress:"{{()=>$base.ss({'data.selectedTab': 'my'})}}",icon:{component:"FA",name:"user"},selectedIcon:{component:"FA",name:"user"},children:[{component:"AppLoader",appName:"my"}]}]}},{component:"div",className:"{{(data.content && data.content.appName) ? 'portal-open-page portal-open-page-show': 'portal-open-page portal-open-page-show-hidden'}}",children:[{_for:"item in data.openPages",component:"AppLoader",appName:"{{item.appName}}","...":"{{item.appProps}}"}]}]},r=n(3),u=n.n(r),c=n(4),s=n.n(c),p=n(1),i=n.n(p),m=n(0),l,d,f,b=(l=Object(m.actionMixin)("base","toast"))(d=f=function e(t){var d=this;s()(this,e),i()(this,"onInit",function(){m.navigate.listen(d.listen),d.base.context.set("openPage",d.setContent)}),i()(this,"setContent",function(p,i){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(n,e){l=u()({},l,{onOk:function e(t){n(t)}});var t=d.base.gs("data");if(!t.content||i!=t.content.appName){var a={title:p,appName:i,appProps:l},o=t.openPages||[],r={"data.content":a},c,s;-1!=t.openPages.findIndex(function(e){return e.title==p||e.appName==i})?d.base.ss(r):(t.openPages.push(a),r["data.openPages"]=o,d.base.ss(r),setTimeout(function(){var e=m.navigate.getLocation(),t,n="".concat(e.pathname).concat(e.search).split("/");(n=n.slice(0,n.indexOf("portal")+1)).push(a.appName),m.navigate.redirect(n.join("/"))},0))}})}),i()(this,"closeContent",function(t){var e=d.base.gs("data.openPages")||[],n=e.findIndex(function(e){return e.appName==t});e=e.splice(n,0),d.base.ss({"data.openPages":e,"data.content":e[e.length-1]})}),i()(this,"listen",function(e,t){var n="".concat(e.pathname).concat(e.search);if(n&&-1!=n.indexOf("portal")){var a=d.base.gs("data.content.appName");if("POP"!=t){var o=n.split("/"),r=o[o.length-1];"portal"!=r&&r?d.setContent("",r):d.base.ss({"data.openTabs":[],"data.content":{}})}else d.closeContent(a)}}),Object.assign(this,t.mixins)})||d,h={data:{selectedTab:"home",content:{},openPages:[],other:{}}},g=m.fetch.mockData;function v(){g.users||(g.users=[{id:1,mobile:13334445556,password:"c4ca4238a0b923820dcc509a6f75849b",name:"zlj"}])}m.fetch.mock("/v1/user/login",function(t){v();var e=g.users.find(function(e){return e.mobile==t.mobile&&e.password==t.password});return e?{result:!0,token:"".concat(e.id,",").concat(e.mobile,",").concat(e.password,",").concat(e.name?e.name:""),value:t}:{result:!1,error:{message:"用户名或者密码不正确（默认 手机:13334445556,密码:1）"}}});var y=n(6);n.d(t,"name",function(){return P}),n.d(t,"view",function(){return o}),n.d(t,"state",function(){return h}),n.d(t,"action",function(){return b});var P=a.name}],o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return o.d(e,"a",e),e},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=window['__pub_portal__'],o(o.s=5);function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var a,r});